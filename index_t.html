<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>泰語基礎發音與字型切換學習板</title>
    <!-- 導入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 導入 Google Fonts 的泰文字型 (Sarabun 和 Kanit) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600&family=Sarabun:wght@400;600&display=swap" rel="stylesheet">
    <!-- 導入 Tone.js 庫用於模擬音效回饋 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>

    <style>
        /* 定義字型類別 */
        .font-sarabun { font-family: 'Sarabun', sans-serif; }
        .font-kanit { font-family: 'Kanit', sans-serif; }
        
        body {
            font-family: 'Kanit', sans-serif; /* 使用 Kanit 作為基礎字型 */
            background-color: #e2e8f0; 
        }
        /* 字卡樣式 */
        .char-card {
            cursor: pointer;
            @apply p-4 rounded-xl shadow-lg border border-gray-200 bg-white transition transform hover:shadow-xl hover:scale-[1.03];
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen flex flex-col items-center justify-center">

    <div id="app" class="w-full max-w-6xl bg-white shadow-2xl rounded-xl p-6 md:p-10 border border-gray-100">
        
        <!-- 標題和切換說明 -->
        <header class="mb-8 text-center">
            <h1 class="text-3xl md:text-5xl font-extrabold text-blue-700 mb-2 font-kanit">
                泰語基礎發音學習板
            </h1>
            <p class="text-gray-600 text-lg">
                點擊字卡發出音效並查看拼音。使用鍵盤上的 **1** (Sarabun) 或 **2** (Kanit) 切換字型。
            </p>
        </header>

        <!-- 字型切換控制區 (保持在最上方) -->
        <div id="font-controls" class="mb-8 grid grid-cols-2 gap-4 max-w-md mx-auto">
            <!-- 按鍵 1: Sarabun (預設) -->
            <div id="font-btn-1" class="key-button p-3 text-center rounded-lg shadow-md bg-blue-500 text-white transition duration-200 transform hover:scale-[1.02] cursor-pointer">
                <div class="text-lg font-bold">1</div>
                <div class="text-sm mt-1 font-sarabun">Sarabun (正式)</div>
            </div>
            
            <!-- 按鍵 2: Kanit -->
            <div id="font-btn-2" class="key-button p-3 text-center rounded-lg shadow-md bg-gray-200 text-gray-700 transition duration-200 transform hover:scale-[1.02] cursor-pointer">
                <div class="text-lg font-bold">2</div>
                <div class="text-sm mt-1 font-kanit">Kanit (現代)</div>
            </div>
        </div>

        <!-- 結果顯示區 -->
        <div id="result-display" class="mb-8 p-4 bg-yellow-100 border-l-4 border-yellow-500 rounded-lg text-center">
            <p id="message-box" class="text-yellow-800 font-bold text-xl">點擊下方字卡開始學習！</p>
        </div>

        <!-- 44 個子音 -->
        <h2 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-2 mt-6">44 個泰語子音 (พยัญชนะไทย)</h2>
        <div id="consonants-grid" 
             class="grid grid-cols-5 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-3">
            <!-- 子音卡片將由 JS 渲染到此處 -->
        </div>

        <!-- 32 個母音 (展示18個主要母音形式) -->
        <h2 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-2 mt-10">泰語母音 (สระไทย - 18 種基本形式)</h2>
        <div id="vowels-grid" 
             class="grid grid-cols-5 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-3">
            <!-- 母音卡片將由 JS 渲染到此處 -->
        </div>

    </div>

    <script>
        // --- 數據結構 (44 子音與 18 個母音形式) ---
        const CONSONANTS = [
            // 中子音 (Middle Class - 9)
            { thai: 'ก', rtgs: 'k', name: 'ko kai (雞)', class: '中', tone: '中' },
            { thai: 'จ', rtgs: 'ch', name: 'cho chan (盤)', class: '中', tone: '中' },
            { thai: 'ด', rtgs: 'd', name: 'do dek (小孩)', class: '中', tone: '中' },
            { thai: 'ต', rtgs: 't', name: 'to tao (龜)', class: '中', tone: '中' },
            { thai: 'ฎ', rtgs: 'd', name: 'do chada (飾冠)', class: '中', tone: '中' },
            { thai: 'ฏ', rtgs: 't', name: 'to patak (標槍)', class: '中', tone: '中' },
            { thai: 'บ', rtgs: 'b', name: 'bo baimai (葉)', class: '中', tone: '中' },
            { thai: 'ป', rtgs: 'p', name: 'po pla (魚)', class: '中', tone: '中' },
            { thai: 'อ', rtgs: 'ʔ', name: 'o ang (盆)', class: '中', tone: '中' },
            
            // 高子音 (High Class - 11)
            { thai: 'ข', rtgs: 'kh', name: 'kho khai (蛋)', class: '高', tone: '升' },
            { thai: 'ฃ', rtgs: 'kh', name: 'kho khuat (瓶)', class: '高', tone: '升', note: '已停用' },
            { thai: 'ฉ', rtgs: 'ch', name: 'cho ching (鈸)', class: '高', tone: '升' },
            { thai: 'ฐ', rtgs: 'th', name: 'tho than (底座)', class: '高', tone: '升' },
            { thai: 'ถ', rtgs: 'th', name: 'tho thung (袋)', class: '高', tone: '升' },
            { thai: 'ผ', rtgs: 'ph', name: 'pho phueng (蜂)', class: '高', tone: '升' },
            { thai: 'ฝ', rtgs: 'f', name: 'fo fa (蓋)', class: '高', tone: '升' },
            { thai: 'ศ', rtgs: 's', name: 'so sala (涼亭)', class: '高', tone: '升' },
            { thai: 'ษ', rtgs: 's', name: 'so ruesi (隱士)', class: '高', tone: '升' },
            { thai: 'ส', rtgs: 's', name: 'so suea (虎)', class: '高', tone: '升' },
            { thai: 'ห', rtgs: 'h', name: 'ho hip (箱)', class: '高', tone: '升' },

            // 低子音 (Low Class - 24)
            { thai: 'ค', rtgs: 'kh', name: 'kho khwai (水牛)', class: '低 (對)', tone: '平' },
            { thai: 'ฅ', rtgs: 'kh', name: 'kho khon (人)', class: '低 (對)', tone: '平', note: '已停用' },
            { thai: 'ฆ', rtgs: 'kh', name: 'kho rakhang (鐘)', class: '低 (對)', tone: '平' },
            { thai: 'ง', rtgs: 'ng', name: 'ngo ngu (蛇)', class: '低 (單)', tone: '平' },
            { thai: 'ช', rtgs: 'ch', name: 'cho chang (象)', class: '低 (對)', tone: '平' },
            { thai: 'ซ', rtgs: 's', name: 'so so (鎖)', class: '低 (對)', tone: '平' },
            { thai: 'ฌ', rtgs: 'ch', name: 'cho choe (樹叢)', class: '低 (對)', tone: '平' },
            { thai: 'ญ', rtgs: 'y', name: 'yo ying (女)', class: '低 (單)', tone: '平' },
            { thai: 'ฑ', rtgs: 'th', name: 'tho montho (仙女)', class: '低 (對)', tone: '平' },
            { thai: 'ฒ', rtgs: 'th', name: 'tho phu thao (老人)', class: '低 (對)', tone: '平' },
            { thai: 'ณ', rtgs: 'n', name: 'no nen (沙彌)', class: '低 (單)', tone: '平' },
            { thai: 'ท', rtgs: 'th', name: 'tho thahan (兵)', class: '低 (對)', tone: '平' },
            { thai: 'ธ', rtgs: 'th', name: 'tho thong (旗)', class: '低 (對)', tone: '平' },
            { thai: 'น', rtgs: 'n', name: 'no nu (鼠)', class: '低 (單)', tone: '平' },
            { thai: 'พ', rtgs: 'ph', name: 'pho phan (托盤)', class: '低 (對)', tone: '平' },
            { thai: 'ฟ', rtgs: 'f', name: 'fo fan (牙)', class: '低 (對)', tone: '平' },
            { thai: 'ภ', rtgs: 'ph', name: 'pho samphao (帆船)', class: '低 (對)', tone: '平' },
            { thai: 'ม', rtgs: 'm', name: 'mo ma (馬)', class: '低 (單)', tone: '平' },
            { thai: 'ย', rtgs: 'y', name: 'yo yak (夜叉)', class: '低 (單)', tone: '平' },
            { thai: 'ร', rtgs: 'r', name: 'ro ruea (船)', class: '低 (單)', tone: '平' },
            { thai: 'ล', rtgs: 'l', name: 'lo ling (猴)', class: '低 (單)', tone: '平' },
            { thai: 'ว', rtgs: 'w', name: 'wo waen (環)', class: '低 (單)', tone: '平' },
            { thai: 'ศ', rtgs: 's', name: 'so sala (涼亭)', class: '低 (對)', tone: '平' },
            { thai: 'ษ', rtgs: 's', name: 'so ruesi (隱士)', class: '低 (對)', tone: '平' },
            { thai: 'ส', rtgs: 's', name: 'so suea (虎)', class: '低 (對)', tone: '平' },
            { thai: 'ห', rtgs: 'h', name: 'ho hip (箱)', class: '低 (對)', tone: '平' },
            { thai: 'ฬ', rtgs: 'l', name: 'lo chula (風箏)', class: '低 (單)', tone: '平' },
            { thai: 'ฮ', rtgs: 'h', name: 'ho nok huk (貓頭鷹)', class: '低 (對)', tone: '平' },
        ].filter(c => !c.note); // 篩選掉已停用的字符，保留 44 個

        const VOWELS = [
            // 單元音 (Monophthongs) - 短/長對
            { thai: 'ะ', rtgs: 'a', name: '短 a (像 father)', type: '短' },
            { thai: 'า', rtgs: 'aa', name: '長 a (像 farm)', type: '長' },
            { thai: 'ิ', rtgs: 'i', name: '短 i (像 bit)', type: '短' },
            { thai: 'ี', rtgs: 'ii', name: '長 i (像 bee)', type: '長' },
            { thai: 'ึ', rtgs: 'ue', name: '短 ue (中舌高)', type: '短' },
            { thai: 'ื', rtgs: 'uue', name: '長 ue (中舌高)', type: '長' },
            { thai: 'ุ', rtgs: 'u', name: '短 u (像 put)', type: '短' },
            { thai: 'ู', rtgs: 'uu', name: '長 u (像 boot)', type: '長' },
            
            // 短/長對 (前圓唇)
            { thai: 'เ-ะ', rtgs: 'e', name: '短 e (像 bet)', type: '短' },
            { thai: 'เ-', rtgs: 'ee', name: '長 e (像 play)', type: '長' },
            { thai: 'แ-ะ', rtgs: 'ae', name: '短 ae (像 cat)', type: '短' },
            { thai: 'แ-', rtgs: 'aee', name: '長 ae (像 care)', type: '長' },
            
            // 短/長對 (後圓唇)
            { thai: 'โ-ะ', rtgs: 'o', name: '短 o (像 not)', type: '短' },
            { thai: 'โ-', rtgs: 'oo', name: '長 o (像 door)', type: '長' },
            { thai: 'เ-าะ', rtgs: 'o', name: '短 o (像 law)', type: '短' },
            { thai: 'อ', rtgs: 'ɔɔ', name: '長 ɔɔ (像 all)', type: '長' },

            // 複合/其他
            { thai: 'เ-อะ', rtgs: 'oe', name: '短 oe (像 bird)', type: '短' },
            { thai: 'เ-อ', rtgs: 'ooe', name: '長 ooe (像 her)', type: '長' },
        ];


        // --- 核心應用程式邏輯 ---
        const textDisplay = document.getElementById('text-display');
        const messageBox = document.getElementById('message-box');
        const consonantsGrid = document.getElementById('consonants-grid');
        const vowelsGrid = document.getElementById('vowels-grid');
        
        const keyButtons = {
            '1': document.getElementById('font-btn-1'),
            '2': document.getElementById('font-btn-2')
        };
        
        const FONT_SETTINGS = [
            { key: '1', name: 'Sarabun', class: 'font-sarabun' },
            { key: '2', name: 'Kanit', class: 'font-kanit' }
        ];

        let currentFontKey = '1';

        // 模擬音頻播放器
        let synth;
        try {
            // 使用 Tone.js 建立一個簡單的正弦波合成器
            synth = new Tone.Synth().toDestination();
        } catch (e) {
            console.error("Tone.js 初始化失敗:", e);
            messageBox.textContent = "音效初始化失敗。請檢查瀏覽器支持。";
        }


        /**
         * 播放一個簡單的音效來模擬發音回饋。
         * @param {string} sound - 發音的拼音 (用於訊息顯示)
         */
        function playAudio(sound) {
            if (synth) {
                // 播放中央 C 音高 0.2 秒
                synth.triggerAttackRelease("C4", "8n"); 
            }
            messageBox.innerHTML = `已點擊：**${sound}** &mdash; 拼音：<span class="text-blue-600">${sound.rtgs}</span> (${sound.name})`;
        }


        /**
         * 渲染字卡
         * @param {HTMLElement} container - 渲染目標容器
         * @param {Array<Object>} data - 字元數據陣列
         * @param {string} type - 類型 ('consonant' or 'vowel')
         */
        function renderCharacters(container, data, type) {
            container.innerHTML = ''; // 清空現有內容

            data.forEach(char => {
                const card = document.createElement('div');
                card.className = 'char-card group';
                card.setAttribute('data-thai', char.thai);
                card.setAttribute('data-rtgs', char.rtgs);

                // 主要泰文字元
                const thaiChar = document.createElement('div');
                thaiChar.textContent = char.thai;
                thaiChar.className = `text-4xl font-bold text-center mb-1 text-gray-800 transition duration-150`;

                // 拼音和名稱
                const infoDiv = document.createElement('div');
                infoDiv.className = 'text-center text-sm text-gray-500 group-hover:text-blue-600';
                infoDiv.innerHTML = `
                    <span class="block font-semibold">${char.rtgs}</span>
                    <span class="block text-xs text-gray-400 truncate">${char.name}</span>
                `;

                card.appendChild(thaiChar);
                card.appendChild(infoDiv);

                card.addEventListener('click', () => {
                    playAudio(char);
                });

                container.appendChild(card);
            });
        }


        /**
         * 字型切換功能
         * @param {string} key - 按下的鍵 ('1' 或 '2')
         */
        function switchFont(key) {
            const fontInfo = FONT_SETTINGS.find(f => f.key === key);

            if (fontInfo) {
                // 1. 移除所有字型類別並重置按鈕樣式
                FONT_SETTINGS.forEach(font => {
                    // 移除所有字卡上的字型類別
                    consonantsGrid.querySelectorAll('.char-card').forEach(card => card.classList.remove(font.class));
                    vowelsGrid.querySelectorAll('.char-card').forEach(card => card.classList.remove(font.class));
                });
                Object.values(keyButtons).forEach(button => {
                    button.classList.remove('bg-blue-500', 'text-white');
                    button.classList.add('bg-gray-200', 'text-gray-700');
                });
                
                // 2. 添加新的字型類別到所有卡片
                const fontClass = fontInfo.class;
                consonantsGrid.querySelectorAll('.char-card').forEach(card => card.classList.add(fontClass));
                vowelsGrid.querySelectorAll('.char-card').forEach(card => card.classList.add(fontClass));
                currentFontKey = key;
                
                // 3. 更新按鈕樣式
                const currentButton = keyButtons[key];
                if (currentButton) {
                    currentButton.classList.remove('bg-gray-200', 'text-gray-700');
                    currentButton.classList.add('bg-blue-500', 'text-white');
                }

                // 4. 顯示確認訊息
                messageBox.textContent = `字型已切換為：${fontInfo.name}`;
            }
        }

        // 監聽鍵盤按鍵事件
        document.addEventListener('keydown', (event) => {
            const key = event.key;
            if (['1', '2'].includes(key)) {
                event.preventDefault(); 
                switchFont(key);
            }
        });

        // 監聽按鈕點擊事件 (提供給觸控/滑鼠使用者)
        Object.keys(keyButtons).forEach(key => {
            keyButtons[key].addEventListener('click', () => {
                switchFont(key);
            });
        });

        // 應用程式初始化
        window.onload = () => {
             // 1. 渲染字卡
             renderCharacters(consonantsGrid, CONSONANTS, 'consonant');
             renderCharacters(vowelsGrid, VOWELS, 'vowel');
             
             // 2. 初始化字型為 Sarabun (按鍵 '1')
             switchFont('1'); 
             messageBox.textContent = '點擊下方字卡開始學習！';
        };

    </script>
</body>
</html>